OpenAI Codex v0.98.0 (research preview)
--------
workdir: /Users/tolu/Desktop/dev/rn-bottom-sheet
model: gpt-5.3-codex
provider: openai
approval: never
sandbox: danger-full-access
reasoning effort: high
reasoning summaries: auto
session id: 019c51d2-fa1e-7002-ac15-7e1c10eae556
--------
user
# Ralph Build Mode

Based on Geoffrey Huntley's Ralph Wiggum methodology.

---

## Phase 0: Orient

Read `.specify/memory/constitution.md` to understand project principles and constraints.

---

## Phase 1: Discover Work Items

Search for incomplete work from these sources (in order):

1. **specs/ folder** — Look for `.md` files NOT marked `## Status: COMPLETE`
2. **IMPLEMENTATION_PLAN.md** — If exists, find unchecked `- [ ]` tasks
3. **GitHub Issues** — Check for open issues (if this is a GitHub repo)
4. **Any task tracker** — Jira, Linear, etc. if configured

Pick the **HIGHEST PRIORITY** incomplete item:
- Lower numbers = higher priority (001 before 010)
- `[HIGH]` before `[MEDIUM]` before `[LOW]`
- Bugs/blockers before features

Before implementing, search the codebase to verify it's not already done.

---

## Phase 1b: Re-Verification Mode (No Incomplete Work Found)

**If ALL specs appear complete**, don't just exit — do a quality check:

1. **Randomly pick** one completed spec from `specs/`
2. **Strictly re-verify** ALL its acceptance criteria:
   - Run the actual tests mentioned in the spec
   - Manually verify each criterion is truly met
   - Check edge cases
   - Look for regressions
3. **If any criterion fails**: Unmark the spec as complete and fix it
4. **If all pass**: Output `<promise>DONE</promise>` to confirm quality

This ensures the codebase stays healthy even when "nothing to do."

---

## Phase 2: Implement

Implement the selected spec/task completely:
- Follow the spec's requirements exactly
- Write clean, maintainable code
- Add tests as needed

---

## Phase 3: Validate

Run the project's test suite and verify:
- All tests pass
- No lint errors
- The spec's acceptance criteria are 100% met

---

## Phase 3b: Conditional Maestro MCP E2E Gate (Example App)

Identify the active feature spec and check its E2E gate marker:
- Look for `E2E Gate State: deferred|required` in `specs/<feature>/spec.md`.
- Default to `deferred` if the marker is missing.

Gate behavior:
- If `deferred`: do NOT block this loop iteration. Log that Maestro MCP was skipped and why.
- If `required`: Maestro MCP is a hard gate for completion.

When `required`, run Maestro MCP against the example app and verify at least:
- sheet opens from example UI
- sheet dismisses cleanly
- detent interaction works
- primary in-sheet navigation flow works

If any required Maestro MCP flow fails, do NOT output `<promise>DONE</promise>`.

---

## Phase 4: Commit & Update

1. Mark the spec/task as complete (add `## Status: COMPLETE` to spec file)
2. `git add -A`
3. `git commit` with a descriptive message
4. `git push`

---

## Completion Signal

**CRITICAL:** Only output the magic phrase when the work is 100% complete.

Check:
- [ ] Implementation matches all requirements
- [ ] All tests pass
- [ ] All acceptance criteria verified
- [ ] Maestro MCP gate satisfied (or explicitly deferred in the active spec)
- [ ] Changes committed and pushed
- [ ] Spec marked as complete

**If ALL checks pass, output:** `<promise>DONE</promise>`

**If ANY check fails:** Fix the issue and try again. Do NOT output the magic phrase.

mcp: codex_apps starting
mcp: maestro starting
mcp: context7 starting
mcp: maestro ready
mcp: context7 ready
mcp: codex_apps ready
mcp startup: ready: maestro, context7, codex_apps

thinking
**Acknowledging user request and starting repo inspection**
codex
I’ll run the Ralph build loop end-to-end: first I’m reading the project constitution and scanning `specs/`, `IMPLEMENTATION_PLAN.md`, and tracker hints to find the highest-priority incomplete item before implementing and validating it. I’m also using the `ralph-wiggum` skill pattern because your request explicitly matches that workflow.

thinking
**Running parallel file inspections**
exec
/bin/zsh -lc "if [ -f IMPLEMENTATION_PLAN.md ]; then sed -n '1,260p' IMPLEMENTATION_PLAN.md; else echo 'NO IMPLEMENTATION_PLAN.md'; fi" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc "if [ -f .specify/memory/constitution.md ]; then sed -n '1,220p' .specify/memory/constitution.md; else echo 'MISSING .specify/memory/constitution.md'; fi" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'pwd && ls -la' in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc "if [ -d specs ]; then rg --files specs; else echo 'MISSING specs dir'; fi" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
/Users/tolu/desktop/dev/rn-bottom-sheet
total 1184
drwxr-xr-x   46 tolu  staff    1472 Feb 12 02:30 .
drwxr-xr-x@ 108 tolu  staff    3456 Feb 12 02:05 ..
drwxr-xr-x@   3 tolu  staff      96 Feb 12 01:44 .claude
drwxr-xr-x    3 tolu  staff      96 Feb 12 02:11 .codex
drwxr-xr-x@   3 tolu  staff      96 Feb 12 01:44 .cursor
-rw-r--r--@   1 tolu  staff     283 Feb 12 00:45 .editorconfig
drwxr-xr-x@  14 tolu  staff     448 Feb 12 04:28 .git
-rw-r--r--@   1 tolu  staff      72 Feb 12 00:45 .gitattributes
drwxr-xr-x@   5 tolu  staff     160 Feb 12 00:45 .github
-rw-r--r--@   1 tolu  staff     866 Feb 12 01:45 .gitignore
-rw-r--r--@   1 tolu  staff       9 Feb 12 00:45 .nvmrc
drwxr-xr-x@   5 tolu  staff     160 Feb 12 02:02 .specify
-rw-r--r--@   1 tolu  staff       2 Feb 12 00:45 .watchmanconfig
drwxr-xr-x@   4 tolu  staff     128 Feb 12 02:26 .yarn
-rw-r--r--@   1 tolu  staff      96 Feb 12 00:45 .yarnrc.yml
-rw-------@   1 tolu  staff     756 Feb 12 02:13 AGENTS.md
-rw-r--r--@   1 tolu  staff     119 Feb 12 01:44 CLAUDE.md
-rw-r--r--@   1 tolu  staff    5489 Feb 12 00:45 CODE_OF_CONDUCT.md
 succeeded in 53ms:
<!--
Sync Impact Report
Version change: 1.0.0 -> 1.1.0
Modified principles:
- Native Fidelity First -> I. Native Fidelity First
- Verification Before Completion -> II. Verification Before Completion
- Simplicity -> III. Minimal, Intentional Scope
Added principles:
- IV. Living Knowledge Base
- V. Deterministic Integration Contracts
Added sections:
- Operational Constraints
- Workflow & Quality Gates
Removed sections:
- Ralph-specific loop mechanics as governing principle source
Templates/runtime sync status:
- ✅ .specify/templates/plan-template.md (Constitution Check gates aligned)
- ✅ .specify/templates/spec-template.md (reviewed, no change required)
- ✅ .specify/templates/tasks-template.md (reviewed, no change required)
- ✅ AGENTS.md (already points to constitution)
 succeeded in 53ms:
# Implementation Plan

> Auto-generated breakdown of specs into tasks.
> Delete this file to return to working directly from specs.

## Priority Tasks

### Phase 1: API and Nitro Contract

- [x] [HIGH] Define complete TypeScript type model (BottomSheetDetent, BottomSheetChangeReason) - from IMPLEMENTATION_PLAN API Design
- [x] [HIGH] Update RnBottomSheet.nitro.ts with full public props interface - from IMPLEMENTATION_PLAN API Design
- [x] [HIGH] Update RnBottomSheet.nitro.ts with public methods (present, dismiss, snapToDetent, getCurrentDetentIndex) - from IMPLEMENTATION_PLAN API Design
- [x] [HIGH] Define callback prop types (onOpenChange, onDetentChange, lifecycle callbacks) - from IMPLEMENTATION_PLAN API Design
- [x] [HIGH] Regenerate Nitrogen artifacts after contract changes - from tasks/todo.md Phase 1
- [x] [HIGH] Validate typings compile and exports work correctly - from tasks/todo.md Phase 1
- [x] [HIGH] Update src/index.tsx to export all public types - from IMPLEMENTATION_PLAN API Design

### Phase 2: iOS Sheet Engine

- [x] [HIGH] Create SheetPresenterViewController using UISheetPresentationController - from ADR-0001
 succeeded in 51ms:
specs/001-native-ios-sheet-bindings/spec.md
specs/001-native-ios-sheet-bindings/plan.md
specs/001-native-ios-sheet-bindings/data-model.md
specs/001-native-ios-sheet-bindings/research.md
specs/001-native-ios-sheet-bindings/tasks.md
specs/001-native-ios-sheet-bindings/quickstart.md
specs/001-native-ios-sheet-bindings/contracts/bottom-sheet-api.yaml
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md
specs/001-native-ios-sheet-bindings/checklists/requirements.md

thinking
**Scanning specs for status markers**
codex
I found unchecked tasks in `IMPLEMENTATION_PLAN.md`, but I still need to complete the prescribed priority scan by checking spec completion markers and issue trackers before selecting the top item. I’ll do that now and then validate whether the chosen task is already implemented in code.
exec
/bin/zsh -lc "sed -n '1,260p' specs/001-native-ios-sheet-bindings/spec.md" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'if [ -d specs ]; then rg -n "''^## Status:" specs -g "*.md"; fi' in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'git remote -v' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
# Feature Specification: Native iOS Sheet Bindings

**Feature Branch**: `001-native-ios-sheet-bindings`  
**Created**: 2026-02-12  
**Status**: Complete  
**Input**: User description: "Build a React Native library that provides native iOS sheet bindings using Nitro Views with React Native children, dynamic detents, React Navigation integration, in-sheet navigation, and Reanimated-compatible APIs."

## Status: COMPLETE

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Present Native Sheet Content (Priority: P1)

As a React Native developer, I can present and dismiss a native-feeling iOS sheet that renders arbitrary React Native child content so that product experiences match Apple sheet behavior.

**Why this priority**: This is the core product value and the minimum viable capability for the package.

**Independent Test**: In an example app, the developer can open/close a sheet and see custom React Native children rendered correctly without writing custom native code.

**Acceptance Scenarios**:
 succeeded in 51ms:
specs/001-native-ios-sheet-bindings/spec.md:8:## Status: COMPLETE
 succeeded in 51ms:
origin	https://github.com/tolulawson/rn-bottom-sheet.git (fetch)
origin	https://github.com/tolulawson/rn-bottom-sheet.git (push)
exec
/bin/zsh -lc "gh issue list --state open --limit 50 2>/dev/null || echo 'GH_ISSUES_UNAVAILABLE'" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 334ms:


thinking
**Verifying issue sources and spec statuses**
codex
I confirmed the feature spec file itself is marked complete, and there were no open GitHub issues returned. Next I’m checking every markdown file under `specs/` for missing `## Status: COMPLETE` markers so we pick the true highest-priority incomplete artifact.
exec
/bin/zsh -lc 'for f in $(find specs -name '"'*.md' | sort); do if rg -q '"'^## Status: COMPLETE'"' \""'$f"; then echo "COMPLETE $f"; else echo "INCOMPLETE $f"; fi; done' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
INCOMPLETE specs/001-native-ios-sheet-bindings/checklists/native-sheet.md
INCOMPLETE specs/001-native-ios-sheet-bindings/checklists/requirements.md
INCOMPLETE specs/001-native-ios-sheet-bindings/data-model.md
INCOMPLETE specs/001-native-ios-sheet-bindings/plan.md
INCOMPLETE specs/001-native-ios-sheet-bindings/quickstart.md
INCOMPLETE specs/001-native-ios-sheet-bindings/research.md
COMPLETE specs/001-native-ios-sheet-bindings/spec.md
INCOMPLETE specs/001-native-ios-sheet-bindings/tasks.md

thinking
**Inspecting tasks for priorities**
exec
/bin/zsh -lc "sed -n '1,280p' specs/001-native-ios-sheet-bindings/tasks.md" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc "sed -n '1,260p' specs/001-native-ios-sheet-bindings/plan.md" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc "rg -n \"\\[ \\]\" specs/001-native-ios-sheet-bindings -g \"*.md\"" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 52ms:
# Implementation Plan: Native iOS Sheet Bindings

**Branch**: `001-native-ios-sheet-bindings` | **Date**: 2026-02-12 | **Spec**: `/Users/tolu/Desktop/dev/rn-bottom-sheet/specs/001-native-ios-sheet-bindings/spec.md`
**Input**: Feature specification from `/Users/tolu/Desktop/dev/rn-bottom-sheet/specs/001-native-ios-sheet-bindings/spec.md`

## Summary

Deliver an iOS-first React Native bottom sheet library built on Nitro Views that presents native iOS sheets, renders arbitrary React Native child content, supports deterministic detent and lifecycle control, and provides optional navigation/animation integration with explicit contract boundaries.

## Technical Context

**Language/Version**: TypeScript 5.9 (public API), Swift 5 (iOS native layer), Kotlin (existing Android fallback path)  
**Primary Dependencies**: react-native 0.81.5, react-native-nitro-modules 0.33.x, nitrogen, optional react-navigation and react-native-reanimated adapters  
**Storage**: N/A (runtime UI behavior only)  
**Testing**: Jest for JS contract tests, iOS integration checks in example app target, Maestro for end-to-end flows  
**Target Platform**: iOS 16+ (primary), non-iOS deterministic fallback behavior  
**Project Type**: Mobile React Native library with example app  
**Performance Goals**: Native sheet interactions maintain smooth 60fps feel in example scenarios; open/dismiss transitions perceived as immediate for standard content  
**Constraints**: New Architecture/Fabric required; single active sheet session in v1; non-iOS parity explicitly out of scope; no crash on unsupported platforms  
**Scale/Scope**: One publishable library package, one example app, and one complete feature spec/plan/tasks artifact set
 succeeded in 52ms:
# Tasks: Native iOS Sheet Bindings

**Input**: Design documents from `/Users/tolu/Desktop/dev/rn-bottom-sheet/specs/001-native-ios-sheet-bindings/`  
**Prerequisites**: plan.md (required), spec.md (required), research.md, data-model.md, contracts/, quickstart.md

**Tests**: Include tests because the specification requires automated verification coverage for API and integration behavior.

**Organization**: Tasks are grouped by user story to enable independent implementation and testing of each story.

## Format: `[ID] [P?] [Story] Description`

- **[P]**: Can run in parallel (different files, no dependencies)
- **[Story]**: Which user story this task belongs to (`[US1]`, `[US2]`, `[US3]`)
- Include exact file paths in descriptions

## Phase 1: Setup (Shared Infrastructure)

**Purpose**: Prepare feature scaffolding, generated bindings workflow, and test harness entry points.

- [x] T001 Create feature README entry and scope note in docs/changelog-notes/README.md
 succeeded in 51ms:
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:11:- [ ] CHK001 Are requirements defined for both controlled and imperative sheet control modes? [Completeness, Spec §FR-001, FR-002]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:12:- [ ] CHK002 Are requirements defined for rendering arbitrary child content and not only static content? [Completeness, Spec §FR-003]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:13:- [ ] CHK003 Are non-iOS fallback requirements explicitly documented? [Completeness, Spec §FR-013]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:14:- [ ] CHK004 Are example-app demonstration requirements defined for all major capabilities? [Completeness, Spec §FR-014]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:18:- [ ] CHK005 Is “native-feeling” behavior clarified through measurable or testable outcomes? [Clarity, Spec §SC-001, SC-003]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:19:- [ ] CHK006 Are detent validation rules specific enough to avoid interpretation drift? [Clarity, Spec §FR-004, FR-005]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:20:- [ ] CHK007 Is “deterministic behavior” defined in terms of explicit callback/state expectations? [Clarity, Spec §FR-006, FR-007, FR-009]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:24:- [ ] CHK008 Are lifecycle callback requirements consistent with sheet session state transitions? [Consistency, Spec §FR-006, Data Model alignment]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:25:- [ ] CHK009 Are integration requirements for navigation and animation consistent with declared v1 scope boundaries? [Consistency, Spec §FR-010, FR-012, Assumptions]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:26:- [ ] CHK010 Is single-session behavior consistent across functional requirements and edge-case descriptions? [Consistency, Spec §FR-009, Edge Cases]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:30:- [ ] CHK011 Are success criteria objectively measurable without implementation-specific tooling assumptions? [Measurability, Spec §SC-001..SC-005]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:31:- [ ] CHK012 Do acceptance scenarios cover open, dismiss, detent change, and integration paths for each user story? [Acceptance Criteria, Spec §User Scenarios]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:35:- [ ] CHK013 Are rapid state toggles and concurrent trigger scenarios explicitly addressed in requirements? [Coverage, Spec §Edge Cases]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:36:- [ ] CHK014 Are keyboard and content-resize edge cases represented as requirement-level behavior expectations? [Coverage, Edge Case, Spec §Edge Cases]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:37:- [ ] CHK015 Are invalid input/error scenarios mapped to explicit requirement obligations? [Coverage, Spec §FR-005]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:41:- [ ] CHK016 Are performance expectations for interaction smoothness and responsiveness specific and reviewable? [Non-Functional, Spec §Technical assumptions + SC-003]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:42:- [ ] CHK017 Are reliability expectations defined for lifecycle event ordering and no-crash fallback behavior? [Non-Functional, Spec §FR-013, SC-005]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:43:- [ ] CHK018 Are observability expectations for diagnosable failures and integration issues defined or intentionally deferred? [Gap]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:47:- [ ] CHK019 Are New Architecture and iOS version assumptions explicitly tied to scope and acceptance outcomes? [Assumption, Spec §Assumptions]
specs/001-native-ios-sheet-bindings/checklists/native-sheet.md:48:- [ ] CHK020 Are optional integration boundaries (navigation/animation) clearly scoped to prevent implicit parity expectations? [Assumption, Spec §FR-010..FR-012]

thinking
**Prioritizing incomplete tasks and verifying coverage**
codex
I’ve identified the top concrete incomplete candidate as the first unchecked `[HIGH]` item in `IMPLEMENTATION_PLAN.md` (iOS detent-behavior integration tests). Before writing code, I’m verifying whether this is already implemented and then I’ll write a short execution plan to `tasks/todo.md` per your project workflow.
exec
/bin/zsh -lc "sed -n '1,260p' tasks/todo.md" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'rg -n "detent|snapToDetent|getCurrentDetentIndex|selectedDetent|sheet" src ios example -g "*test*"' in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'git status --short' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
# Implementation Todo

## Phase 0: Project Memory Bootstrap

- [x] Create `docs/` knowledge base structure
- [x] Add decision-complete implementation plan
- [x] Add reference summaries and source index
- [x] Add ADRs for primary architecture decisions
- [x] Add sync/check scripts for docs integrity

## Phase 1: API and Nitro Contract

- [x] Finalize public TypeScript API and Nitro view contract
- [x] Regenerate Nitrogen artifacts
- [x] Validate typings and exports

## Phase 2: iOS Sheet Engine

- [ ] Implement presenter/controller architecture
- [ ] Map detent model and lifecycle events
 succeeded in 51ms:
src/__tests__/bottom-sheet.contract.test.ts:2: * Contract tests for bottom sheet API behavior
src/__tests__/bottom-sheet.contract.test.ts:20:    it.todo('should accept valid semantic detents (medium, large)');
src/__tests__/bottom-sheet.contract.test.ts:21:    it.todo('should accept valid fraction detents (0..1)');
src/__tests__/bottom-sheet.contract.test.ts:22:    it.todo('should accept valid points detents (>0)');
src/__tests__/bottom-sheet.contract.test.ts:23:    it.todo('should reject empty detent array');
src/__tests__/bottom-sheet.contract.test.ts:26:    it.todo('should normalize detent order to low-to-high');
src/__tests__/bottom-sheet.contract.test.ts:27:    it.todo('should deduplicate equivalent detents');
src/__tests__/bottom-sheet.contract.test.ts:31:    it.todo('should validate initialDetent is within detent bounds');
src/__tests__/bottom-sheet.contract.test.ts:32:    it.todo('should validate selectedDetent is within detent bounds');
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:36:  'rn-bottom-sheet',
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:45:          selectedDetent,
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:58:          ReactBottomSheetMockRuntime.useRef(selectedDetent);
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:60:          selectedDetent ?? 0
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:72:            snapToDetent(index: number) {
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:76:            getCurrentDetentIndex() {
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:114:          if (previousSelectedDetent.current === selectedDetent) {
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:118:          if (typeof selectedDetent === 'number') {
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:119:            currentDetentIndex.current = selectedDetent;
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:120:            onDetentChange?.(selectedDetent, 'programmatic');
example/src/__tests__/sheet-open-dismiss.integration.test.tsx:123:          previousSelectedDetent.current = selectedDetent;
 succeeded in 52ms:
 M .specify/templates/plan-template.md
 M .specify/templates/spec-template.md
 M PROMPT_build.md
 M PROMPT_plan.md
 M scripts/ralph-loop-codex.sh
 M scripts/ralph-loop.sh
?? logs/
?? yarn.lock

thinking
**Assessing existing detent integration tests**
exec
/bin/zsh -lc "sed -n '1,340p' example/src/__tests__/sheet-open-dismiss.integration.test.tsx" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
jest.mock('react', () => require('../../../node_modules/react'));
jest.mock('react/jsx-runtime', () =>
  require('../../../node_modules/react/jsx-runtime')
);
jest.mock('react/jsx-dev-runtime', () =>
  require('../../../node_modules/react/jsx-dev-runtime')
);

const ReactRuntime = require('react');
const TestRenderer = require('react-test-renderer');

jest.mock('react-native', () => {
  const ReactNativeMockRuntime = require('react');

  const View = (props: any) =>
    ReactNativeMockRuntime.createElement('View', props, props.children);
  const Text = (props: any) =>
    ReactNativeMockRuntime.createElement('Text', props, props.children);
  const Button = (props: any) =>
    ReactNativeMockRuntime.createElement('Button', {

thinking
**Planning iterative task tracking**
Plan update
Selected highest-priority unchecked item from IMPLEMENTATION_PLAN: Phase 5 [HIGH] iOS integration tests for detent behavior. Code search indicates detent integration coverage may already exist, so this iteration will focus on proof + tracker synchronization + full validation.
  → Document iteration plan in tasks/todo.md with checkable items for detent-integration verification and completion criteria
  • Verify detent integration coverage is sufficient (test behavior and acceptance mapping) and add/adjust tests only if gaps are found
  • Update IMPLEMENTATION_PLAN.md and iteration review records to mark completed work accurately
  • Run validation gates (lint, typecheck, test) and conditional Maestro gate evaluation per spec
  • Commit and push with descriptive message if all checks pass

thinking
**Expanding plan commentary**
codex
Plan for this Ralph iteration:

1. Add a new checklist block in `tasks/todo.md` for this exact item: Phase 5 `[HIGH]` detent integration coverage.
2. Verify the existing integration flow actually satisfies detent behavior acceptance (open at initial detent, snap/change callback path, deterministic status updates).
3. If any gap appears, add focused tests; if coverage is sufficient, synchronize tracking only.
4. Update `IMPLEMENTATION_PLAN.md` and the `tasks/todo.md` Review log with concrete evidence.
5. Run `yarn lint`, `yarn typecheck`, and `yarn test`, then re-check Maestro gate state from the spec (currently expected `deferred` unless changed).
6. Commit and push only after all checks pass.

I’m starting with the `tasks/todo.md` planning checklist update now.

thinking
**Appending iteration section**
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/tasks/todo.md
@@ -260,2 +260,12 @@
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
apply_patch(auto_approved=true) exited 0 in 15ms:
Success. Updated the following files:
M tasks/todo.md
file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 

file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 

codex
The iteration checklist is now written into `tasks/todo.md`. I’m moving to strict coverage verification against the detent acceptance path before deciding whether we need any test code changes.
Plan update
  ✓ Document iteration plan in tasks/todo.md with checkable items for detent-integration verification and completion criteria
  → Verify detent integration coverage is sufficient (test behavior and acceptance mapping) and add/adjust tests only if gaps are found
  • Update IMPLEMENTATION_PLAN.md and iteration review records to mark completed work accurately
  • Run validation gates (lint, typecheck, test) and conditional Maestro gate evaluation per spec
  • Commit and push with descriptive message if all checks pass
file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Assessing iOS detent integration tests**
exec
/bin/zsh -lc "sed -n '1,320p' src/__tests__/bottom-sheet.presenter.integration.test.tsx" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 52ms:
import React, { createRef } from 'react';
import TestRenderer from 'react-test-renderer';
import { BottomSheet } from '../components/BottomSheet';
import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
import type { BottomSheetMethods } from '../types/bottom-sheet';

type MockRnBottomSheetViewProps = RnBottomSheetProps & {
  hybridRef?: (instance: unknown) => void;
};

const mockNativeMethods = {
  present: jest.fn(),
  dismiss: jest.fn(),
  snapToDetent: jest.fn(),
  getCurrentDetentIndex: jest.fn(),
};

let mockLatestProps: MockRnBottomSheetViewProps | null = null;

jest.mock('react-native-nitro-modules', () => ({
file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning iOS detent integration tests**
exec
/bin/zsh -lc "sed -n '1,300p' src/__tests__/bottom-sheet.methods.test.ts" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
import React, { createRef } from 'react';
import TestRenderer from 'react-test-renderer';
import { BottomSheet } from '../components/BottomSheet';
import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
import type { BottomSheetMethods } from '../types/bottom-sheet';

type MockRnBottomSheetViewProps = RnBottomSheetProps & {
  hybridRef?: (instance: unknown) => void;
};

const mockNativeMethods = {
  present: jest.fn(),
  dismiss: jest.fn(),
  snapToDetent: jest.fn(),
  getCurrentDetentIndex: jest.fn(),
};

let mockLatestProps: MockRnBottomSheetViewProps | null = null;

jest.mock('react-native-nitro-modules', () => ({
file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning detent integration tests**
codex
I confirmed there is partial detent coverage, but it is split across unit-style tests and doesn’t explicitly prove the full presenter detent flow in one integration path. I’m adding a dedicated presenter-detent integration suite now so this `[HIGH]` item is unambiguously complete.
exec
/bin/zsh -lc "sed -n '1,260p' src/components/bottom-sheet-utils.ts" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc "sed -n '1,360p' src/components/BottomSheet.tsx" in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc "sed -n '1,220p' src/RnBottomSheet.nitro.ts" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
import type {
  NativeBackgroundInteraction,
  NativeDetentConfig,
} from '../RnBottomSheet.nitro';
import type {
  BackgroundInteractionMode,
  BottomSheetDetent,
  BottomSheetProps,
  ControlledProps,
} from '../types/bottom-sheet';
import {
  DEFAULT_DETENTS,
  detentsToNativeConfig,
  validateDetents,
} from '../utils/detents';

const ERROR_PREFIX = '[rn-bottom-sheet]';

export function isControlledProps(
  props: BottomSheetProps
 succeeded in 51ms:
import { callback, type HybridRef } from 'react-native-nitro-modules';
import {
  forwardRef,
  useCallback,
  useEffect,
  useImperativeHandle,
  useMemo,
  useRef,
  useState,
} from 'react';
import { View } from 'react-native';
import type {
  NativeChangeReason,
  RnBottomSheetMethods,
  RnBottomSheetProps,
} from '../RnBottomSheet.nitro';
import { RnBottomSheetView } from '../native/RnBottomSheetView';
import {
  isNativeSheetSupported,
  warnUnsupportedPlatform,
 succeeded in 50ms:
/**
 * Nitro View Contract for RnBottomSheet
 *
 * This file defines the native view interface used by Nitrogen to generate
 * the Swift/Kotlin bindings and JavaScript host component configuration.
 *
 * IMPORTANT: Run `yarn nitrogen` after any changes to regenerate bindings.
 */

import type {
  HybridView,
  HybridViewMethods,
  HybridViewProps,
} from 'react-native-nitro-modules';

// =============================================================================
// Detent Types (Native Bridge)
// =============================================================================

/**
file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Investigating iOS integration tests**
exec
/bin/zsh -lc 'rg -n "XCTest|detent|UISheet|presenter" ios example/ios -g "*test*"' in /Users/tolu/Desktop/dev/rn-bottom-sheet exited 1 in 52ms:

file update:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Creating iOS detent integration tests**
file update
A /Users/tolu/Desktop/dev/rn-bottom-sheet/src/__tests__/bottom-sheet.detent.integration.test.tsx
import React, { createRef } from 'react';
import TestRenderer from 'react-test-renderer';
import { BottomSheet } from '../components/BottomSheet';
import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';

type MockRnBottomSheetViewProps = RnBottomSheetProps & {
  hybridRef?: (instance: unknown) => void;
};

const mockNativeMethods = {
  present: jest.fn(),
  dismiss: jest.fn(),
  snapToDetent: jest.fn(),
  getCurrentDetentIndex: jest.fn(),
};

let mockLatestProps: MockRnBottomSheetViewProps | null = null;

jest.mock('react-native-nitro-modules', () => ({
  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
}));

jest.mock('../platform/fallback', () => ({
  isNativeSheetSupported: () => true,
  warnUnsupportedPlatform: jest.fn(),
}));

jest.mock('../native/RnBottomSheetView', () => {
  const ReactRuntime = require('react');

  return {
    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
      mockLatestProps = props;

      ReactRuntime.useEffect(() => {
        props.hybridRef?.(mockNativeMethods as never);
      }, [props.hybridRef]);

      return null;
    },
  };
});

describe('bottom-sheet presenter detent integration', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    mockLatestProps = null;
    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
  });

  it('forwards detent configuration and selected indexes to native presenter props', () => {
    const detents: BottomSheetProps['detents'] = [
      { type: 'points', value: 200 },
      { type: 'semantic', value: 'medium' },
      { type: 'semantic', value: 'large' },
    ];

    TestRenderer.act(() => {
      TestRenderer.create(
        React.createElement(BottomSheet, {
          isOpen: true,
          onOpenChange: jest.fn(),
          detents,
          initialDetent: 1,
          selectedDetent: 2,
        })
      );
    });

    expect(mockLatestProps).not.toBeNull();
    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
    expect(mockLatestProps?.initialDetentIndex).toBe(1);
    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
  });

  it('updates selectedDetent index in native presenter when controlled props change', () => {
    const detents: BottomSheetProps['detents'] = [
      { type: 'semantic', value: 'medium' },
      { type: 'semantic', value: 'large' },
    ];

    let renderer: TestRenderer.ReactTestRenderer;

    TestRenderer.act(() => {
      renderer = TestRenderer.create(
        React.createElement(BottomSheet, {
          isOpen: true,
          onOpenChange: jest.fn(),
          detents,
          selectedDetent: 0,
        })
      );
    });

    expect(mockLatestProps?.selectedDetentIndex).toBe(0);

    TestRenderer.act(() => {
      renderer.update(
        React.createElement(BottomSheet, {
          isOpen: true,
          onOpenChange: jest.fn(),
          detents,
          selectedDetent: 1,
        })
      );
    });

    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
  });

  it('bridges native detent events and imperative detent methods', () => {
    const ref = createRef<BottomSheetMethods>();
    const onDetentChange = jest.fn();

    TestRenderer.act(() => {
      TestRenderer.create(
        React.createElement(BottomSheet, {
          ref,
          defaultOpen: false,
          detents: [
            { type: 'semantic', value: 'medium' },
            { type: 'semantic', value: 'large' },
          ],
          onDetentChange,
        })
      );
    });

    expect(mockLatestProps).not.toBeNull();

    TestRenderer.act(() => {
      mockLatestProps?.onDetentChange(1, 'swipe');
    });

    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');

    TestRenderer.act(() => {
      ref.current?.snapToDetent(1);
    });

    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
  });
});
apply_patch(auto_approved=true) exited 0 in 46ms:
Success. Updated the following files:
A src/__tests__/bottom-sheet.detent.integration.test.tsx
file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..a0ba23167800eb3ccdb306de027ccbee7258b1b2
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,146 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: [
+            { type: 'semantic', value: 'medium' },
+            { type: 'semantic', value: 'large' },
+          ],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 

file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..a0ba23167800eb3ccdb306de027ccbee7258b1b2
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,146 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: [
+            { type: 'semantic', value: 'medium' },
+            { type: 'semantic', value: 'large' },
+          ],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning targeted test run**
exec
/bin/zsh -lc 'cat package.json' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
{
  "name": "rn-bottom-sheet",
  "version": "0.1.0",
  "description": "Native bindings to SwiftUI sheet",
  "main": "./lib/module/index.js",
  "types": "./lib/typescript/src/index.d.ts",
  "exports": {
    ".": {
      "source": "./src/index.tsx",
      "types": "./lib/typescript/src/index.d.ts",
      "default": "./lib/module/index.js"
    },
    "./package.json": "./package.json"
  },
  "files": [
    "src",
    "lib",
    "android",
    "ios",
    "cpp",
file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..a0ba23167800eb3ccdb306de027ccbee7258b1b2
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,146 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: [
+            { type: 'semantic', value: 'medium' },
+            { type: 'semantic', value: 'large' },
+          ],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Running targeted tests**
exec
/bin/zsh -lc 'yarn test src/__tests__/bottom-sheet.detent.integration.test.tsx --runInBand' in /Users/tolu/Desktop/dev/rn-bottom-sheet exited 1 in 759ms:
watchman warning:  Recrawled this watch 1 time, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/tolu/Desktop/dev/rn-bottom-sheet' ; watchman watch-project '/Users/tolu/Desktop/dev/rn-bottom-sheet'`

FAIL src/__tests__/bottom-sheet.detent.integration.test.tsx
  bottom-sheet presenter detent integration
    ✕ forwards detent configuration and selected indexes to native presenter props (6 ms)
    ✕ updates selectedDetent index in native presenter when controlled props change (1 ms)
    ✕ bridges native detent events and imperative detent methods (1 ms)

  ● bottom-sheet presenter detent integration › forwards detent configuration and selected indexes to native presenter props

    [rn-bottom-sheet] Invalid detent configuration: Invalid detent at index 1: Invalid detent type: {"type":"semantic","value":"medium"}

      30 |
      31 |   if (!validationResult.valid || !validationResult.normalizedDetents) {
    > 32 |     throw new Error(
         |           ^
file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..a0ba23167800eb3ccdb306de027ccbee7258b1b2
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,146 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: [
+            { type: 'semantic', value: 'medium' },
+            { type: 'semantic', value: 'large' },
+          ],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Inspecting detent type definitions**
exec
/bin/zsh -lc "sed -n '1,260p' src/types/bottom-sheet.ts" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
/**
 * Bottom Sheet Type Definitions
 *
 * Core type definitions for the bottom sheet API.
 * These types are used across the JS and native layers.
 */

// =============================================================================
// Detent Types
// =============================================================================

/**
 * Semantic detent identifiers that map to iOS system detents.
 */
export type SemanticDetent = 'fit' | 'medium' | 'large';

/**
 * Fraction-based detent (0..1 range representing percentage of screen height).
 * Maps to UISheetPresentationController.Detent.custom(identifier:resolver:)
 */
file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..a0ba23167800eb3ccdb306de027ccbee7258b1b2
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,146 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'semantic', value: 'medium' },
+      { type: 'semantic', value: 'large' },
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: [
+            { type: 'semantic', value: 'medium' },
+            { type: 'semantic', value: 'large' },
+          ],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Updating detent typing and tests**
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -55,4 +55,4 @@
       { type: 'points', value: 200 },
-      { type: 'semantic', value: 'medium' },
-      { type: 'semantic', value: 'large' },
+      'medium',
+      'large',
     ];
@@ -79,4 +79,4 @@
     const detents: BottomSheetProps['detents'] = [
-      { type: 'semantic', value: 'medium' },
-      { type: 'semantic', value: 'large' },
+      'medium',
+      'large',
     ];
@@ -121,6 +121,3 @@
           defaultOpen: false,
-          detents: [
-            { type: 'semantic', value: 'medium' },
-            { type: 'semantic', value: 'large' },
-          ],
+          detents: ['medium', 'large'],
           onDetentChange,
apply_patch(auto_approved=true) exited 0 in 38ms:
Success. Updated the following files:
M src/__tests__/bottom-sheet.detent.integration.test.tsx
file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 

file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning targeted test rerun**
exec
/bin/zsh -lc 'yarn test src/__tests__/bottom-sheet.detent.integration.test.tsx --runInBand' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 770ms:
watchman warning:  Recrawled this watch 1 time, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/tolu/Desktop/dev/rn-bottom-sheet' ; watchman watch-project '/Users/tolu/Desktop/dev/rn-bottom-sheet'`

PASS src/__tests__/bottom-sheet.detent.integration.test.tsx
  bottom-sheet presenter detent integration
    ✓ forwards detent configuration and selected indexes to native presenter props (5 ms)
    ✓ updates selectedDetent index in native presenter when controlled props change (1 ms)
    ✓ bridges native detent events and imperative detent methods (1 ms)

Test Suites: 1 passed, 1 total
Tests:       3 passed, 3 total
Snapshots:   0 total
Time:        0.294 s, estimated 1 s
Ran all test suites matching /src\/__tests__\/bottom-sheet.detent.integration.test.tsx/i.
file update:
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Updating plan statuses and checklists**
codex
I added a dedicated detent integration test suite and confirmed it passes. Next I’m syncing the trackers (`IMPLEMENTATION_PLAN.md` + `tasks/todo.md`) and then running full validation gates before commit/push.
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/IMPLEMENTATION_PLAN.md
@@ -61,3 +61,3 @@
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
apply_patch(auto_approved=true) exited 0 in 31ms:
Success. Updated the following files:
M IMPLEMENTATION_PLAN.md
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning validation and gating**
codex
Tracker sync is in progress. I’m now running full project gates (`lint`, `typecheck`, `test`) and then I’ll record the Maestro gate evaluation from the active spec (`deferred` vs `required`).
exec
/bin/zsh -lc 'yarn lint' in /Users/tolu/Desktop/dev/rn-bottom-sheet exited 1 in 2.05s:

/Users/tolu/Desktop/dev/rn-bottom-sheet/src/__tests__/bottom-sheet.detent.integration.test.tsx
   6:14  error  Replace `·BottomSheetMethods,·BottomSheetProps·` with `⏎··BottomSheetMethods,⏎··BottomSheetProps,⏎`  prettier/prettier
  79:51  error  Replace `⏎······'medium',⏎······'large',⏎····` with `'medium',·'large'`                              prettier/prettier

✖ 2 problems (2 errors, 0 warnings)
  2 errors and 0 warnings potentially fixable with the `--fix` option.

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Fixing import and formatting patch**
codex
`lint` failed only on formatting in the new test file; I’m applying the minimal Prettier-aligned formatting fix and re-running gates.
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Inspecting patch failure cause**
exec
/bin/zsh -lc "sed -n '1,260p' src/__tests__/bottom-sheet.detent.integration.test.tsx" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
import React, { createRef } from 'react';
import TestRenderer from 'react-test-renderer';
import { BottomSheet } from '../components/BottomSheet';
import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';

type MockRnBottomSheetViewProps = RnBottomSheetProps & {
  hybridRef?: (instance: unknown) => void;
};

const mockNativeMethods = {
  present: jest.fn(),
  dismiss: jest.fn(),
  snapToDetent: jest.fn(),
  getCurrentDetentIndex: jest.fn(),
};

let mockLatestProps: MockRnBottomSheetViewProps | null = null;

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..d065b06e7ed6e9147ac360f10876d6d9ea2aac58
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = [
+      'medium',
+      'large',
+    ];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Updating import and array format**
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -5,3 +5,6 @@
 import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
-import type { BottomSheetMethods, BottomSheetProps } from '../types/bottom-sheet';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
 
@@ -78,6 +81,3 @@
   it('updates selectedDetent index in native presenter when controlled props change', () => {
-    const detents: BottomSheetProps['detents'] = [
-      'medium',
-      'large',
-    ];
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
 
apply_patch(auto_approved=true) exited 0 in 42ms:
Success. Updated the following files:
M src/__tests__/bottom-sheet.detent.integration.test.tsx
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Running lint and typecheck**
exec
/bin/zsh -lc 'yarn lint' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 2.09s:

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Running typecheck and tests**
exec
/bin/zsh -lc 'yarn typecheck' in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'yarn test' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 1.08s:

 succeeded in 1.12s:
watchman warning:  Recrawled this watch 1 time, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/tolu/Desktop/dev/rn-bottom-sheet' ; watchman watch-project '/Users/tolu/Desktop/dev/rn-bottom-sheet'`

PASS src/__tests__/bottom-sheet.detent.integration.test.tsx
PASS src/__tests__/bottom-sheet.presenter.integration.test.tsx
PASS example/src/__tests__/sheet-open-dismiss.integration.test.tsx
PASS src/__tests__/bottom-sheet.reanimated.test.ts
PASS src/__tests__/bottom-sheet.navigation.test.ts
PASS src/__tests__/bottom-sheet.wrapper.test.ts
PASS src/__tests__/bottom-sheet.fallback.test.ts
PASS src/__tests__/bottom-sheet.contract.test.ts
PASS src/__tests__/bottom-sheet.methods.test.ts
PASS src/__tests__/bottom-sheet.lifecycle.test.ts
PASS src/__tests__/bottom-sheet-adapter.test.ts
PASS src/__tests__/index.test.tsx
PASS src/__tests__/bottom-sheet.detents.test.ts

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning spec marker evaluation**
exec
/bin/zsh -lc 'rg -n "E2E Gate State|Latest Gate Evaluation|Blocking Rule" specs/001-native-ios-sheet-bindings/spec.md' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
101:- **E2E Gate State**: `deferred`
106:- **Latest Gate Evaluation (2026-02-12)**:
112:- **Blocking Rule**:
123:- **SC-006**: When `E2E Gate State` is `required`, Maestro MCP flows for the example app pass for open, dismiss, detent interaction, and in-sheet navigation in 100% of release-gate runs.
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Planning task and status updates**
exec
/bin/zsh -lc 'rg -n "''^## Review|''^## Ralph Iteration 2026-02-12 '"\\(Phase 5 HIGH iOS Detent Integration Test Sync\\)\" tasks/todo.md && sed -n '60,220p' tasks/todo.md && sed -n '520,760p' tasks/todo.md" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 53ms:
58:## Review
262:## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
- Date: 2026-02-12
- Reviewer: Codex (GPT-5)
- Findings:
  - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
  - Ralph iteration `Phase 3 Native Host Lifecycle + Recycle`: implemented a dedicated native sheet host container (`SheetHostContainerView`) with explicit attach/detach hooks, deferred presentation until attachment, and deterministic teardown on detach in `ios/RnBottomSheet.swift`.
  - Added `prepareForRecycle()` conformance in `ios/RnBottomSheet.swift` to clear stale callbacks/session state and reset sheet props for Nitro view reuse safety.
  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, `yarn test`, and successful `yarn workspace rn-bottom-sheet-example ios` build/run.
  - Maestro MCP gate check remains non-blocking because `specs/001-native-ios-sheet-bindings/spec.md` currently sets `E2E Gate State: deferred`.
  - Ralph iteration `Phase 2 Dismissal Reason Detection`: implemented native dismissal-reason classification in `ios/RnBottomSheet.swift` with deterministic mapping for `programmatic`, `backdrop`, `swipe`, and `system` (programmatic overrides, backdrop tap inference window, and non-interactive fallback to system), plus callback pass-through coverage for `backdrop`/`system` in `src/__tests__/bottom-sheet.navigation.test.ts`.
  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, `yarn test`, and successful iOS simulator build via `xcodebuild -workspace example/ios/rnBottomSheetExample.xcworkspace -scheme RnBottomSheetExample -configuration Debug -sdk iphonesimulator -destination 'generic/platform=iOS Simulator' build`.
  - Ralph iteration `P2 iOS native conformance blocker`: fixed `ios/RnBottomSheet.swift` to conform to generated `HybridRnBottomSheetSpec` types/signatures (typed detents/background interaction/callbacks + throwing methods), replaced direct `UISheetPresentationControllerDelegate` conformance with an `NSObject` proxy, and normalized dismissal/detent callback routing.
  - Re-verified iOS/native integration with a successful `yarn workspace rn-bottom-sheet-example ios` build/run and passing `yarn lint`, `yarn typecheck`, and `yarn test`.
  - Updated `IMPLEMENTATION_PLAN.md` completion status for Phase 2 presenter/present/dismiss/lifecycle items and Phase 5 iOS example build verification.
  - Ralph iteration `T038`: executed conditional Maestro gate evaluation; identified that US2/US3 tasks are complete and baseline JS checks pass, but iOS example build fails (`yarn workspace rn-bottom-sheet-example ios`) due `ios/RnBottomSheet.swift` Nitrogen protocol conformance errors, preventing app install/launch for deterministic Maestro flow execution.
  - Updated `specs/001-native-ios-sheet-bindings/spec.md` with dated gate-evaluation rationale and retained `E2E Gate State: deferred` until the iOS build blocker is fixed.
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Identifying targeted patch location**
exec
/bin/zsh -lc "sed -n '248,330p' tasks/todo.md" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for presenter lifecycle"
- [x] Verify no existing integration test already covers native presenter lifecycle callback sequencing through the `BottomSheet` wrapper
- [x] Add integration tests in `src/__tests__/bottom-sheet.presenter.integration.test.tsx` that validate native lifecycle callback forwarding and open-state synchronization behavior
- [x] Update `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete
- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
- [x] Capture verification outcomes in this Review section

## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Helper T027)

- [x] Confirm `T027` is the highest-priority truly incomplete item and verify `src/navigation/bottom-sheet-adapter.ts` does not already exist
- [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
- [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
- [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`

## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)

- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
- [ ] Add/adjust integration assertions only if a real coverage gap exists
- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Correcting misplaced task bullets**
exec
/bin/zsh -lc "sed -n '50,86p' tasks/todo.md" in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 52ms:

- [x] Create Ralph scaffolding directories (`.specify`, `specs`, `logs`, `history`, command folders)
- [x] Install Ralph loop scripts for Claude and Codex
- [x] Install optional RLM/helper scripts and `scripts/lib` utilities
- [x] Create project constitution at `.specify/memory/constitution.md`
- [x] Create `AGENTS.md`, `CLAUDE.md`, `PROMPT_build.md`, and `PROMPT_plan.md`
- [x] Verify scripts execute with `--help`

## Review

- Date: 2026-02-12
- Reviewer: Codex (GPT-5)
- Findings:
  - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
  - Ralph iteration `Phase 3 Native Host Lifecycle + Recycle`: implemented a dedicated native sheet host container (`SheetHostContainerView`) with explicit attach/detach hooks, deferred presentation until attachment, and deterministic teardown on detach in `ios/RnBottomSheet.swift`.
  - Added `prepareForRecycle()` conformance in `ios/RnBottomSheet.swift` to clear stale callbacks/session state and reset sheet props for Nitro view reuse safety.
  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, `yarn test`, and successful `yarn workspace rn-bottom-sheet-example ios` build/run.
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..b9bc978a2a08a5889e8ba4776116fcf334b248ca
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -258,6 +258,16 @@
 - [x] Implement optional navigation adapter helpers in `src/navigation/bottom-sheet-adapter.ts`
 - [x] Add adapter helper unit tests in `src/__tests__/bottom-sheet-adapter.test.ts`
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [ ] Add/adjust integration assertions only if a real coverage gap exists
+- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 


thinking
**Preparing targeted patch application**
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/tasks/todo.md
@@ -260,2 +260,4 @@
 - [x] Mark `T027` complete in `specs/001-native-ios-sheet-bindings/tasks.md`
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Capture verification outcomes in the Review section
 
@@ -263,11 +265,9 @@
 
-- [ ] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
-- [ ] Verify whether existing integration tests already cover detent open/snap/change behavior
-- [ ] Add/adjust integration assertions only if a real coverage gap exists
-- [ ] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
-- [ ] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
-- [ ] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
 - [ ] Commit and push changes with a descriptive message
-- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
-- [x] Capture verification outcomes in the Review section
 
apply_patch(auto_approved=true) exited 0 in 54ms:
Success. Updated the following files:
M tasks/todo.md
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..5a3de1e6cb20cd8119d90a042539d356c3922c36
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -261,6 +261,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..5a3de1e6cb20cd8119d90a042539d356c3922c36
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -261,6 +261,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Inserting new top review bullet**
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/tasks/todo.md
@@ -62,2 +62,6 @@
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
apply_patch(auto_approved=true) exited 0 in 43ms:
Success. Updated the following files:
M tasks/todo.md
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Updating plan statuses**
Plan update
  ✓ Document iteration plan in tasks/todo.md with checkable items for detent-integration verification and completion criteria
  ✓ Verify detent integration coverage is sufficient (test behavior and acceptance mapping) and add/adjust tests only if gaps are found
  ✓ Update IMPLEMENTATION_PLAN.md and iteration review records to mark completed work accurately
  ✓ Run validation gates (lint, typecheck, test) and conditional Maestro gate evaluation per spec
  → Commit and push with descriptive message if all checks pass
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Planning selective commit to avoid unrelated changes**
exec
/bin/zsh -lc 'git status --short' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
 M .specify/templates/plan-template.md
 M .specify/templates/spec-template.md
 M IMPLEMENTATION_PLAN.md
 M PROMPT_build.md
 M PROMPT_plan.md
 M scripts/ralph-loop-codex.sh
 M scripts/ralph-loop.sh
 M tasks/todo.md
?? logs/
?? src/__tests__/bottom-sheet.detent.integration.test.tsx
?? yarn.lock
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Planning selective git diff**
codex
Validation and tracker updates are complete, including Maestro gate evaluation (`deferred`). I’m now preparing a focused commit with only this iteration’s files (`IMPLEMENTATION_PLAN.md`, `tasks/todo.md`, and the new detent integration test) to avoid pulling unrelated working-tree changes.
exec
/bin/zsh -lc 'git diff -- IMPLEMENTATION_PLAN.md' in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'git diff -- tasks/todo.md' in /Users/tolu/Desktop/dev/rn-bottom-sheetexec
/bin/zsh -lc 'git diff -- src/__tests__/bottom-sheet.detent.integration.test.tsx' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 50ms:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52e..5e0b261 100644
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
 succeeded in 50ms:
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525e..751b95c 100644
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
 succeeded in 51ms:

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Adjusting diff strategy after staging**
exec
/bin/zsh -lc 'git add IMPLEMENTATION_PLAN.md tasks/todo.md src/__tests__/bottom-sheet.detent.integration.test.tsx && git status --short' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 51ms:
 M .specify/templates/plan-template.md
 M .specify/templates/spec-template.md
M  IMPLEMENTATION_PLAN.md
 M PROMPT_build.md
 M PROMPT_plan.md
 M scripts/ralph-loop-codex.sh
 M scripts/ralph-loop.sh
A  src/__tests__/bottom-sheet.detent.integration.test.tsx
M  tasks/todo.md
?? logs/
?? yarn.lock
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Committing integration test update**
exec
/bin/zsh -lc 'git commit -m "test: add detent integration coverage for bottom sheet presenter"' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 1.17s:
┃  lint ❯ 

[1G[0K[1G[0K⠙[1G[0K
                                      
  ────────────────────────────────────
summary: (done in 0.87 seconds)       
✔️ lint (0.86 seconds)
╭──────────────────────────────────────╮
│ 🥊 lefthook v2.1.1  hook: commit-msg │
╰──────────────────────────────────────╯
┃  commitlint ❯ 

[1G[0K[1G[0K⠙[1G[0K
                                      
  ────────────────────────────────────
summary: (done in 0.30 seconds)       
✔️ commitlint (0.30 seconds)
[main aa71dff] test: add detent integration coverage for bottom sheet presenter
 3 files changed, 158 insertions(+), 1 deletion(-)
 create mode 100644 src/__tests__/bottom-sheet.detent.integration.test.tsx
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Completing commit and pushing**
exec
/bin/zsh -lc 'git push' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 775ms:
To https://github.com/tolulawson/rn-bottom-sheet.git
   29b4cb4..aa71dff  main -> main
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..751b95ca2a9d745ed0ac2c3b0b893fafaf0df311
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [ ] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Updating task commit status**
codex
The implementation commit is pushed (`aa71dff`). I still need to finalize the iteration tracker by checking the `commit and push` item in `tasks/todo.md`, then I’ll push that bookkeeping commit.
file update
M /Users/tolu/Desktop/dev/rn-bottom-sheet/tasks/todo.md
@@ -275,3 +275,3 @@
 - [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
-- [ ] Commit and push changes with a descriptive message
+- [x] Commit and push changes with a descriptive message
 
apply_patch(auto_approved=true) exited 0 in 47ms:
Success. Updated the following files:
M tasks/todo.md
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities

file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Committing and pushing changes**
exec
/bin/zsh -lc 'git add tasks/todo.md && git commit -m "chore: mark detent integration iteration as pushed"' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 300ms:
┃  commitlint ❯ 

[1G[0K[1G[0K⠙[1G[0K
                                      
  ────────────────────────────────────
summary: (done in 0.28 seconds)       
✔️ commitlint (0.28 seconds)
[main 0bfbb0d] chore: mark detent integration iteration as pushed
 1 file changed, 1 insertion(+), 1 deletion(-)
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities

exec
/bin/zsh -lc 'git push' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 688ms:
To https://github.com/tolulawson/rn-bottom-sheet.git
   aa71dff..0bfbb0d  main -> main
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Confirming plan step completion**
Plan update
  ✓ Document iteration plan in tasks/todo.md with checkable items for detent-integration verification and completion criteria
  ✓ Verify detent integration coverage is sufficient (test behavior and acceptance mapping) and add/adjust tests only if gaps are found
  ✓ Update IMPLEMENTATION_PLAN.md and iteration review records to mark completed work accurately
  ✓ Run validation gates (lint, typecheck, test) and conditional Maestro gate evaluation per spec
  ✓ Commit and push with descriptive message if all checks pass
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Checking final git status**
exec
/bin/zsh -lc 'git status --short' in /Users/tolu/Desktop/dev/rn-bottom-sheet succeeded in 54ms:
 M .specify/templates/plan-template.md
 M .specify/templates/spec-template.md
 M PROMPT_build.md
 M PROMPT_plan.md
 M scripts/ralph-loop-codex.sh
 M scripts/ralph-loop.sh
?? logs/
?? yarn.lock
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities


thinking
**Confirming strict final output**
codex
<promise>DONE</promise>
file update:
diff --git a/IMPLEMENTATION_PLAN.md b/IMPLEMENTATION_PLAN.md
index 1c0a52ef2cd8f9f30b6cb854076a7b9187066e68..5e0b2613b11f3ef16c0a7bfa05e13c7cba99d8b9
--- a/IMPLEMENTATION_PLAN.md
+++ b/IMPLEMENTATION_PLAN.md
@@ -59,7 +59,7 @@
 - [x] [HIGH] Add unit tests for detent normalization logic - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add unit tests for API prop validation - from IMPLEMENTATION_PLAN Verification
 - [x] [HIGH] Add iOS integration tests for presenter lifecycle - from IMPLEMENTATION_PLAN Verification
-- [ ] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
+- [x] [HIGH] Add iOS integration tests for detent behavior - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: open sheet, verify visible - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: change detents, verify positions - from IMPLEMENTATION_PLAN Verification
 - [ ] [MEDIUM] Add Maestro E2E flow: dismiss sheet, verify closed - from IMPLEMENTATION_PLAN Verification
diff --git a/src/__tests__/bottom-sheet.detent.integration.test.tsx b/src/__tests__/bottom-sheet.detent.integration.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..42117275da9d99c0d5caebc97723f0eab398d4d7
--- /dev/null
+++ b/src/__tests__/bottom-sheet.detent.integration.test.tsx
@@ -0,0 +1,143 @@
+import React, { createRef } from 'react';
+import TestRenderer from 'react-test-renderer';
+import { BottomSheet } from '../components/BottomSheet';
+import { toNativeDetentConfig } from '../components/bottom-sheet-utils';
+import type { RnBottomSheetProps } from '../RnBottomSheet.nitro';
+import type {
+  BottomSheetMethods,
+  BottomSheetProps,
+} from '../types/bottom-sheet';
+
+type MockRnBottomSheetViewProps = RnBottomSheetProps & {
+  hybridRef?: (instance: unknown) => void;
+};
+
+const mockNativeMethods = {
+  present: jest.fn(),
+  dismiss: jest.fn(),
+  snapToDetent: jest.fn(),
+  getCurrentDetentIndex: jest.fn(),
+};
+
+let mockLatestProps: MockRnBottomSheetViewProps | null = null;
+
+jest.mock('react-native-nitro-modules', () => ({
+  callback: <T extends (...args: any[]) => any>(fn: T) => fn,
+}));
+
+jest.mock('../platform/fallback', () => ({
+  isNativeSheetSupported: () => true,
+  warnUnsupportedPlatform: jest.fn(),
+}));
+
+jest.mock('../native/RnBottomSheetView', () => {
+  const ReactRuntime = require('react');
+
+  return {
+    RnBottomSheetView: (props: MockRnBottomSheetViewProps) => {
+      mockLatestProps = props;
+
+      ReactRuntime.useEffect(() => {
+        props.hybridRef?.(mockNativeMethods as never);
+      }, [props.hybridRef]);
+
+      return null;
+    },
+  };
+});
+
+describe('bottom-sheet presenter detent integration', () => {
+  beforeEach(() => {
+    jest.clearAllMocks();
+    mockLatestProps = null;
+    mockNativeMethods.getCurrentDetentIndex.mockReturnValue(2);
+  });
+
+  it('forwards detent configuration and selected indexes to native presenter props', () => {
+    const detents: BottomSheetProps['detents'] = [
+      { type: 'points', value: 200 },
+      'medium',
+      'large',
+    ];
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          initialDetent: 1,
+          selectedDetent: 2,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+    expect(mockLatestProps?.detents).toEqual(toNativeDetentConfig(detents));
+    expect(mockLatestProps?.initialDetentIndex).toBe(1);
+    expect(mockLatestProps?.selectedDetentIndex).toBe(2);
+  });
+
+  it('updates selectedDetent index in native presenter when controlled props change', () => {
+    const detents: BottomSheetProps['detents'] = ['medium', 'large'];
+
+    let renderer: TestRenderer.ReactTestRenderer;
+
+    TestRenderer.act(() => {
+      renderer = TestRenderer.create(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 0,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(0);
+
+    TestRenderer.act(() => {
+      renderer.update(
+        React.createElement(BottomSheet, {
+          isOpen: true,
+          onOpenChange: jest.fn(),
+          detents,
+          selectedDetent: 1,
+        })
+      );
+    });
+
+    expect(mockLatestProps?.selectedDetentIndex).toBe(1);
+  });
+
+  it('bridges native detent events and imperative detent methods', () => {
+    const ref = createRef<BottomSheetMethods>();
+    const onDetentChange = jest.fn();
+
+    TestRenderer.act(() => {
+      TestRenderer.create(
+        React.createElement(BottomSheet, {
+          ref,
+          defaultOpen: false,
+          detents: ['medium', 'large'],
+          onDetentChange,
+        })
+      );
+    });
+
+    expect(mockLatestProps).not.toBeNull();
+
+    TestRenderer.act(() => {
+      mockLatestProps?.onDetentChange(1, 'swipe');
+    });
+
+    expect(onDetentChange).toHaveBeenCalledWith(1, 'swipe');
+
+    TestRenderer.act(() => {
+      ref.current?.snapToDetent(1);
+    });
+
+    expect(mockNativeMethods.snapToDetent).toHaveBeenCalledWith(1);
+    expect(ref.current?.getCurrentDetentIndex()).toBe(2);
+  });
+});
diff --git a/tasks/todo.md b/tasks/todo.md
index 8d7525ef7d236ad0d2b77ef5612a7ec0c0c9f852..24f50de7f93d975e346e4e1f89732c6824ac47b6
--- a/tasks/todo.md
+++ b/tasks/todo.md
@@ -60,6 +60,10 @@
 - Date: 2026-02-12
 - Reviewer: Codex (GPT-5)
 - Findings:
+  - Ralph iteration `Phase 5 HIGH iOS Detent Integration Test Sync`: added `src/__tests__/bottom-sheet.detent.integration.test.tsx` to validate detent presenter prop wiring (native detent config + initial/selected indices), controlled `selectedDetent` updates, and detent event/method bridging (`onDetentChange`, `snapToDetent`, `getCurrentDetentIndex`) through the real `BottomSheet` wrapper.
+  - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for detent behavior" complete.
+  - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test`.
+  - Maestro MCP gate remains non-blocking for this loop because `specs/001-native-ios-sheet-bindings/spec.md` still sets `E2E Gate State: deferred`.
   - Ralph iteration `Phase 5 HIGH iOS Presenter Lifecycle Integration Tests`: added `src/__tests__/bottom-sheet.presenter.integration.test.tsx` to validate presenter lifecycle callback ordering through the real `BottomSheet` wrapper, native-driven open-state synchronization in uncontrolled mode, and controlled-mode callback-only open/close behavior.
   - Updated `IMPLEMENTATION_PLAN.md` to mark "Add iOS integration tests for presenter lifecycle" complete.
   - Re-verified this iteration with passing `yarn lint`, `yarn typecheck`, and `yarn test` (including the new presenter integration suite).
@@ -261,6 +265,16 @@
 - [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
 - [x] Capture verification outcomes in the Review section
 
+## Ralph Iteration 2026-02-12 (Phase 5 HIGH iOS Detent Integration Test Sync)
+
+- [x] Confirm the highest-priority incomplete item is `IMPLEMENTATION_PLAN.md` Phase 5: "Add iOS integration tests for detent behavior"
+- [x] Verify whether existing integration tests already cover detent open/snap/change behavior
+- [x] Add/adjust integration assertions only if a real coverage gap exists
+- [x] Update `IMPLEMENTATION_PLAN.md` and this Review log to reflect verified completion state
+- [x] Run and pass verification: `yarn lint`, `yarn typecheck`, `yarn test`
+- [x] Evaluate conditional Maestro gate state from `specs/001-native-ios-sheet-bindings/spec.md` and record deferred/required outcome
+- [x] Commit and push changes with a descriptive message
+
 ## Ralph Iteration 2026-02-12 (US3 Navigation Adapter Entry Export T028)
 
 - [x] Confirm `T028` is the highest-priority truly incomplete item and verify `src/index.tsx` does not already export navigation adapter utilities

tokens used
85,684
<promise>DONE</promise>
